{"ast":null,"code":"var _jsxFileName = \"/Users/dasharathdyavari/Desktop/vwo-fme/src/locations/EntryEditor.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Button, Heading, Paragraph, Select, Modal } from '@contentful/f36-components';\nimport useMethods from 'use-methods';\nimport { /* useCMA, */useSDK } from '@contentful/react-apps-toolkit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GlobalStateContext = /*#__PURE__*/React.createContext(null);\nconst methods = state => {\n  return {\n    setInitialData({\n      featureFlags,\n      contentTypes,\n      referenceInfo\n    }) {\n      state.featureFlags = featureFlags;\n      state.contentTypes = contentTypes;\n      state.referenceInfo = referenceInfo;\n      state.loading = false;\n    },\n    setError(message) {\n      state.error = message;\n    },\n    setFeatureFlagId(id) {\n      state.featureFlagId = id;\n      state.meta = {};\n    },\n    setVariations(variations) {\n      state.variations = variations;\n    },\n    setMeta(meta) {\n      state.meta = meta;\n    },\n    updateFeatureFlag(id, _featureFlag) {\n      const index = state.featureFlags.findIndex(featureFlag => featureFlag.id.toString() === id.toString());\n      if (index !== -1) {\n        state.featureFlags[index] = _featureFlag;\n      }\n    }\n  };\n};\nconst getInitialValues = sdk => ({\n  loading: true,\n  error: false,\n  featureFlags: [],\n  contentTypes: [],\n  meta: sdk.entry.fields.meta.getValue() || {},\n  variations: sdk.entry.fields.variations.getValue() || [],\n  featureFlagId: sdk.entry.fields.featureFlagId.getValue(),\n  entries: {}\n});\nconst fetchInitialData = async (sdk, client) => {\n  const {\n    space,\n    ids,\n    locales\n  } = sdk;\n  const [contentTypes, entries, featureFlags] = await Promise.all([space.getContentTypes({\n    order: 'name',\n    limit: 1000\n  }), space.getEntries({\n    links_to_entry: ids.entry,\n    skip: 0,\n    limit: 1000\n  }), client.getFeatureFlags()]);\n  return {\n    featureFlags,\n    contentTypes: contentTypes.items,\n    referenceInfo: {\n      entries: entries\n    }\n  };\n};\nconst EntryEditor = props => {\n  _s();\n  const globalState = useMethods(methods, getInitialValues(props.sdk));\n  const [state, actions] = globalState;\n  useEffect(() => {\n    fetchInitialData(props.sdk, props.client).then(data => {\n      actions.setInitialData(data);\n      return data;\n    }).catch(() => {\n      actions.setError('Unable to load initial data');\n    });\n  }, [actions, props.client, props.sdk]);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(GlobalStateContext.provider, {\n      value: globalState,\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        title: \"Connect with VWO\",\n        isShown: !props.client,\n        children: [/*#__PURE__*/_jsxDEV(Paragraph, {\n          testId: \"reconnect-vwo\",\n          children: \"Your VWO session has expired. Reconnect to continue editing.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: props.openAuth,\n          testId: \"connect-button\",\n          isFullWidth: true,\n          buttonType: \"naked\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s(EntryEditor, \"9OQ6yn4kUAduDp0myf77sItPSYE=\", false, function () {\n  return [useMethods];\n});\n_c = EntryEditor;\nexport default EntryEditor;\nvar _c;\n$RefreshReg$(_c, \"EntryEditor\");","map":{"version":3,"names":["React","useState","useEffect","Button","Heading","Paragraph","Select","Modal","useMethods","useSDK","jsxDEV","_jsxDEV","GlobalStateContext","createContext","methods","state","setInitialData","featureFlags","contentTypes","referenceInfo","loading","setError","message","error","setFeatureFlagId","id","featureFlagId","meta","setVariations","variations","setMeta","updateFeatureFlag","_featureFlag","index","findIndex","featureFlag","toString","getInitialValues","sdk","entry","fields","getValue","entries","fetchInitialData","client","space","ids","locales","Promise","all","getContentTypes","order","limit","getEntries","links_to_entry","skip","getFeatureFlags","items","EntryEditor","props","_s","globalState","actions","then","data","catch","Fragment","children","provider","value","title","isShown","testId","fileName","_jsxFileName","lineNumber","columnNumber","onClick","openAuth","isFullWidth","buttonType","_c","$RefreshReg$"],"sources":["/Users/dasharathdyavari/Desktop/vwo-fme/src/locations/EntryEditor.jsx"],"sourcesContent":["import React, {useState,useEffect} from 'react';\nimport { Button, Heading, Paragraph, Select, Modal } from '@contentful/f36-components';\nimport useMethods from 'use-methods';\nimport { /* useCMA, */ useSDK } from '@contentful/react-apps-toolkit';\n\nconst GlobalStateContext = React.createContext(null);\n\n\nconst methods = state => {\n  return {\n    setInitialData({featureFlags, contentTypes, referenceInfo }){\n      state.featureFlags = featureFlags;\n      state.contentTypes = contentTypes;\n      state.referenceInfo = referenceInfo;\n      state.loading = false;\n    },\n    setError(message){\n      state.error = message;\n    },\n    setFeatureFlagId(id){\n      state.featureFlagId = id;\n      state.meta = {};\n    },\n    setVariations(variations){\n      state.variations = variations;\n    },\n    setMeta(meta) {\n      state.meta = meta;\n    },\n    updateFeatureFlag(id, _featureFlag){\n      const index = state.featureFlags.findIndex(\n        featureFlag => featureFlag.id.toString() === id.toString()\n      );\n      if (index !== -1) {\n        state.featureFlags[index] = _featureFlag;\n      }\n    }\n  }\n}\n\nconst getInitialValues = sdk => ({\n  loading: true,\n  error: false,\n  featureFlags: [],\n  contentTypes: [],\n  meta: sdk.entry.fields.meta.getValue() || {},\n  variations: sdk.entry.fields.variations.getValue() || [],\n  featureFlagId: sdk.entry.fields.featureFlagId.getValue(),\n  entries: {}\n})\n\nconst fetchInitialData = async (sdk, client) => {\n  const { space, ids, locales } = sdk;\n  const [contentTypes, entries, featureFlags] = await Promise.all([\n    space.getContentTypes({ order: 'name', limit: 1000}),\n    space.getEntries({ links_to_entry: ids.entry, skip: 0, limit: 1000}),\n    client.getFeatureFlags()\n  ]);\n\n  return {\n    featureFlags,\n    contentTypes: contentTypes.items,\n    referenceInfo: {\n      entries: entries\n    }\n  }\n}\n\n\n\nconst EntryEditor = (props) => {\n  const globalState = useMethods(methods, getInitialValues(props.sdk));\n  const [state, actions] = globalState;\n\n  useEffect(() => {\n    fetchInitialData(props.sdk, props.client)\n      .then(data => {\n        actions.setInitialData(data);\n        return data;\n      })\n      .catch(() => {\n        actions.setError('Unable to load initial data');\n      });\n  }, [actions, props.client, props.sdk]);\n\n  return (\n    <React.Fragment>\n      <GlobalStateContext.provider value={globalState}>\n        <Modal title='Connect with VWO' isShown={!props.client}>\n          <Paragraph testId='reconnect-vwo'>\n            Your VWO session has expired. Reconnect to continue editing.\n          </Paragraph>\n          <Button\n            onClick={props.openAuth}\n            testId='connect-button'\n            isFullWidth\n            buttonType='naked'>\n          </Button>\n        </Modal>\n      </GlobalStateContext.provider>\n    </React.Fragment>\n  )\n};\n\nexport default EntryEditor;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,QAAQ,EAACC,SAAS,QAAO,OAAO;AAC/C,SAASC,MAAM,EAAEC,OAAO,EAAEC,SAAS,EAAEC,MAAM,EAAEC,KAAK,QAAQ,4BAA4B;AACtF,OAAOC,UAAU,MAAM,aAAa;AACpC,SAAS,aAAcC,MAAM,QAAQ,gCAAgC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtE,MAAMC,kBAAkB,gBAAGZ,KAAK,CAACa,aAAa,CAAC,IAAI,CAAC;AAGpD,MAAMC,OAAO,GAAGC,KAAK,IAAI;EACvB,OAAO;IACLC,cAAcA,CAAC;MAACC,YAAY;MAAEC,YAAY;MAAEC;IAAc,CAAC,EAAC;MAC1DJ,KAAK,CAACE,YAAY,GAAGA,YAAY;MACjCF,KAAK,CAACG,YAAY,GAAGA,YAAY;MACjCH,KAAK,CAACI,aAAa,GAAGA,aAAa;MACnCJ,KAAK,CAACK,OAAO,GAAG,KAAK;IACvB,CAAC;IACDC,QAAQA,CAACC,OAAO,EAAC;MACfP,KAAK,CAACQ,KAAK,GAAGD,OAAO;IACvB,CAAC;IACDE,gBAAgBA,CAACC,EAAE,EAAC;MAClBV,KAAK,CAACW,aAAa,GAAGD,EAAE;MACxBV,KAAK,CAACY,IAAI,GAAG,CAAC,CAAC;IACjB,CAAC;IACDC,aAAaA,CAACC,UAAU,EAAC;MACvBd,KAAK,CAACc,UAAU,GAAGA,UAAU;IAC/B,CAAC;IACDC,OAAOA,CAACH,IAAI,EAAE;MACZZ,KAAK,CAACY,IAAI,GAAGA,IAAI;IACnB,CAAC;IACDI,iBAAiBA,CAACN,EAAE,EAAEO,YAAY,EAAC;MACjC,MAAMC,KAAK,GAAGlB,KAAK,CAACE,YAAY,CAACiB,SAAS,CACxCC,WAAW,IAAIA,WAAW,CAACV,EAAE,CAACW,QAAQ,CAAC,CAAC,KAAKX,EAAE,CAACW,QAAQ,CAAC,CAC3D,CAAC;MACD,IAAIH,KAAK,KAAK,CAAC,CAAC,EAAE;QAChBlB,KAAK,CAACE,YAAY,CAACgB,KAAK,CAAC,GAAGD,YAAY;MAC1C;IACF;EACF,CAAC;AACH,CAAC;AAED,MAAMK,gBAAgB,GAAGC,GAAG,KAAK;EAC/BlB,OAAO,EAAE,IAAI;EACbG,KAAK,EAAE,KAAK;EACZN,YAAY,EAAE,EAAE;EAChBC,YAAY,EAAE,EAAE;EAChBS,IAAI,EAAEW,GAAG,CAACC,KAAK,CAACC,MAAM,CAACb,IAAI,CAACc,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC;EAC5CZ,UAAU,EAAES,GAAG,CAACC,KAAK,CAACC,MAAM,CAACX,UAAU,CAACY,QAAQ,CAAC,CAAC,IAAI,EAAE;EACxDf,aAAa,EAAEY,GAAG,CAACC,KAAK,CAACC,MAAM,CAACd,aAAa,CAACe,QAAQ,CAAC,CAAC;EACxDC,OAAO,EAAE,CAAC;AACZ,CAAC,CAAC;AAEF,MAAMC,gBAAgB,GAAG,MAAAA,CAAOL,GAAG,EAAEM,MAAM,KAAK;EAC9C,MAAM;IAAEC,KAAK;IAAEC,GAAG;IAAEC;EAAQ,CAAC,GAAGT,GAAG;EACnC,MAAM,CAACpB,YAAY,EAAEwB,OAAO,EAAEzB,YAAY,CAAC,GAAG,MAAM+B,OAAO,CAACC,GAAG,CAAC,CAC9DJ,KAAK,CAACK,eAAe,CAAC;IAAEC,KAAK,EAAE,MAAM;IAAEC,KAAK,EAAE;EAAI,CAAC,CAAC,EACpDP,KAAK,CAACQ,UAAU,CAAC;IAAEC,cAAc,EAAER,GAAG,CAACP,KAAK;IAAEgB,IAAI,EAAE,CAAC;IAAEH,KAAK,EAAE;EAAI,CAAC,CAAC,EACpER,MAAM,CAACY,eAAe,CAAC,CAAC,CACzB,CAAC;EAEF,OAAO;IACLvC,YAAY;IACZC,YAAY,EAAEA,YAAY,CAACuC,KAAK;IAChCtC,aAAa,EAAE;MACbuB,OAAO,EAAEA;IACX;EACF,CAAC;AACH,CAAC;AAID,MAAMgB,WAAW,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAC7B,MAAMC,WAAW,GAAGrD,UAAU,CAACM,OAAO,EAAEuB,gBAAgB,CAACsB,KAAK,CAACrB,GAAG,CAAC,CAAC;EACpE,MAAM,CAACvB,KAAK,EAAE+C,OAAO,CAAC,GAAGD,WAAW;EAEpC3D,SAAS,CAAC,MAAM;IACdyC,gBAAgB,CAACgB,KAAK,CAACrB,GAAG,EAAEqB,KAAK,CAACf,MAAM,CAAC,CACtCmB,IAAI,CAACC,IAAI,IAAI;MACZF,OAAO,CAAC9C,cAAc,CAACgD,IAAI,CAAC;MAC5B,OAAOA,IAAI;IACb,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM;MACXH,OAAO,CAACzC,QAAQ,CAAC,6BAA6B,CAAC;IACjD,CAAC,CAAC;EACN,CAAC,EAAE,CAACyC,OAAO,EAAEH,KAAK,CAACf,MAAM,EAAEe,KAAK,CAACrB,GAAG,CAAC,CAAC;EAEtC,oBACE3B,OAAA,CAACX,KAAK,CAACkE,QAAQ;IAAAC,QAAA,eACbxD,OAAA,CAACC,kBAAkB,CAACwD,QAAQ;MAACC,KAAK,EAAER,WAAY;MAAAM,QAAA,eAC9CxD,OAAA,CAACJ,KAAK;QAAC+D,KAAK,EAAC,kBAAkB;QAACC,OAAO,EAAE,CAACZ,KAAK,CAACf,MAAO;QAAAuB,QAAA,gBACrDxD,OAAA,CAACN,SAAS;UAACmE,MAAM,EAAC,eAAe;UAAAL,QAAA,EAAC;QAElC;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAW,CAAC,eACZjE,OAAA,CAACR,MAAM;UACL0E,OAAO,EAAElB,KAAK,CAACmB,QAAS;UACxBN,MAAM,EAAC,gBAAgB;UACvBO,WAAW;UACXC,UAAU,EAAC;QAAO;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACmB;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAChB,CAAC;AAErB,CAAC;AAAChB,EAAA,CAhCIF,WAAW;EAAA,QACKlD,UAAU;AAAA;AAAAyE,EAAA,GAD1BvB,WAAW;AAkCjB,eAAeA,WAAW;AAAC,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}