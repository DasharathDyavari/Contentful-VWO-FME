{"ast":null,"code":"var _jsxFileName = \"/Users/dasharathdyavari/Desktop/vwo-fme/src/locations/EntryEditor.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Button, Heading, Paragraph, Select, Modal } from '@contentful/f36-components';\nimport useMethods from 'use-methods';\nimport { /* useCMA, */useSDK } from '@contentful/react-apps-toolkit';\nimport { css } from 'emotion';\nimport VWOLogo from '../components/VWOLogo';\nimport StatusBar from '../components/StatusBar';\nimport SectionSplitter from '../components/SectionSplitter';\nimport FeatureFlag from '../components/FeatureFlag';\nimport { featureFlags } from '../components/data';\nimport tokens from '@contentful/f36-tokens';\nimport Variations from '../components/Variations';\nimport prepareReferenceInfo from '../reference-info';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GlobalStateContext = /*#__PURE__*/React.createContext(null);\nconst styles = {\n  editor: css({\n    margin: tokens.spacingXl\n  }),\n  connect: css({\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    '&:hover': {\n      backgroundColor: 'transparent!important' // necessary to eliminate the forma styling in favor of the custom optimizely styling\n    }\n  })\n};\nconst methods = state => {\n  return {\n    setInitialData({\n      featureFlag,\n      contentTypes,\n      referenceInfo\n    }) {\n      state.featureFlag = featureFlag;\n      state.contentTypes = contentTypes;\n      state.referenceInfo = referenceInfo;\n      state.loading = false;\n    },\n    setFeatureFlag(featureFlag) {\n      state.featureFlag = featureFlag;\n    },\n    setError(message) {\n      state.error = message;\n    },\n    setVariations(variations) {\n      state.variations = variations;\n    },\n    setMeta(meta) {\n      state.meta = meta;\n    }\n  };\n};\nconst getInitialValues = sdk => {\n  var _sdk$entry$fields$met;\n  return {\n    loading: true,\n    error: false,\n    contentTypes: [],\n    meta: ((_sdk$entry$fields$met = sdk.entry.fields.meta) === null || _sdk$entry$fields$met === void 0 ? void 0 : _sdk$entry$fields$met.getValue()) || {},\n    variations: [{\n      name: 'Control',\n      id: 1\n    }, {\n      name: 'Variation1',\n      id: 2\n    }],\n    featureFlag: {},\n    entries: {}\n  };\n};\nconst fetchInitialData = async sdk => {\n  const {\n    space,\n    ids,\n    locales\n  } = sdk;\n  const [contentTypes, entries] = await Promise.all([space.getContentTypes({\n    order: 'name',\n    limit: 1000\n  }), space.getEntries({\n    links_to_entry: ids.entry,\n    skip: 0,\n    limit: 1000\n  })]);\n  return {\n    contentTypes: contentTypes.items,\n    referenceInfo: prepareReferenceInfo({\n      entries: entries.items\n    })\n  };\n};\nconst EntryEditor = props => {\n  _s();\n  const globalState = useMethods(methods, getInitialValues(props.sdk));\n  const [state, actions] = globalState;\n  const createFeatureFlag = featureFlag => {\n    console.log(\"feature flag created: \", featureFlag);\n    actions.setFeatureFlag(featureFlag);\n  };\n  useEffect(() => {\n    fetchInitialData(props.sdk).then(data => {\n      actions.setInitialData(data);\n      return data;\n    }).catch(() => {\n      actions.setError('Unable to load initial data');\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(GlobalStateContext.Provider, {\n      value: globalState,\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        title: \"Connect with VWO\",\n        isShown: props.client,\n        children: [/*#__PURE__*/_jsxDEV(Paragraph, {\n          testId: \"reconnect-vwo\",\n          children: \"Your VWO session has expired. Reconnect to continue editing.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: styles.connect,\n          onClick: props.openAuth,\n          testId: \"connect-button\",\n          isFullWidth: true,\n          buttonType: \"naked\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(VWOLogo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.editor,\n        testId: \"editor-page\",\n        children: [/*#__PURE__*/_jsxDEV(StatusBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SectionSplitter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FeatureFlag, {\n          sdk: props.sdk,\n          onFeatureFlagCreation: createFeatureFlag\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), state.featureFlag && /*#__PURE__*/_jsxDEV(SectionSplitter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 33\n        }, this), state.featureFlag && /*#__PURE__*/_jsxDEV(Variations, {\n          sdk: props.sdk,\n          variations: state.variations,\n          contentTypes: state.contentTypes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n_s(EntryEditor, \"9OQ6yn4kUAduDp0myf77sItPSYE=\", false, function () {\n  return [useMethods];\n});\n_c = EntryEditor;\nexport default EntryEditor;\nvar _c;\n$RefreshReg$(_c, \"EntryEditor\");","map":{"version":3,"names":["React","useState","useEffect","Button","Heading","Paragraph","Select","Modal","useMethods","useSDK","css","VWOLogo","StatusBar","SectionSplitter","FeatureFlag","featureFlags","tokens","Variations","prepareReferenceInfo","jsxDEV","_jsxDEV","GlobalStateContext","createContext","styles","editor","margin","spacingXl","connect","display","alignItems","justifyContent","backgroundColor","methods","state","setInitialData","featureFlag","contentTypes","referenceInfo","loading","setFeatureFlag","setError","message","error","setVariations","variations","setMeta","meta","getInitialValues","sdk","_sdk$entry$fields$met","entry","fields","getValue","name","id","entries","fetchInitialData","space","ids","locales","Promise","all","getContentTypes","order","limit","getEntries","links_to_entry","skip","items","EntryEditor","props","_s","globalState","actions","createFeatureFlag","console","log","then","data","catch","Fragment","children","Provider","value","title","isShown","client","testId","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","openAuth","isFullWidth","buttonType","onFeatureFlagCreation","_c","$RefreshReg$"],"sources":["/Users/dasharathdyavari/Desktop/vwo-fme/src/locations/EntryEditor.jsx"],"sourcesContent":["import React, {useState,useEffect} from 'react';\nimport { Button, Heading, Paragraph, Select, Modal } from '@contentful/f36-components';\nimport useMethods from 'use-methods';\nimport { /* useCMA, */ useSDK } from '@contentful/react-apps-toolkit';\nimport { css } from 'emotion';\nimport VWOLogo from '../components/VWOLogo';\nimport StatusBar from '../components/StatusBar';\nimport SectionSplitter from '../components/SectionSplitter';\nimport FeatureFlag from '../components/FeatureFlag';\nimport { featureFlags } from '../components/data';\nimport tokens from '@contentful/f36-tokens';\nimport Variations from '../components/Variations';\nimport prepareReferenceInfo from '../reference-info';\n\nconst GlobalStateContext = React.createContext(null);\n\nconst styles = {\n  editor: css({\n    margin: tokens.spacingXl\n  }),\n  connect: css({\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    '&:hover': {\n      backgroundColor: 'transparent!important' // necessary to eliminate the forma styling in favor of the custom optimizely styling\n    }\n  })\n};\n\nconst methods = state => {\n  return {\n    setInitialData({featureFlag, contentTypes, referenceInfo }){\n      state.featureFlag = featureFlag;\n      state.contentTypes = contentTypes;\n      state.referenceInfo = referenceInfo;\n      state.loading = false;\n    },\n    setFeatureFlag(featureFlag){\n      state.featureFlag = featureFlag;\n    },\n    setError(message){\n      state.error = message;\n    },\n    setVariations(variations){\n      state.variations = variations;\n    },\n    setMeta(meta) {\n      state.meta = meta;\n    }\n  }\n}\n\nconst getInitialValues = sdk => ({\n  loading: true,\n  error: false,\n  contentTypes: [],\n  meta: sdk.entry.fields.meta?.getValue() || {},\n  variations: [{name: 'Control', id: 1},{name: 'Variation1', id: 2}],\n  featureFlag: {},\n  entries: {}\n})\n\nconst fetchInitialData = async (sdk) => {\n  const { space, ids, locales } = sdk;\n  const [contentTypes, entries] = await Promise.all([\n    space.getContentTypes({ order: 'name', limit: 1000}),\n    space.getEntries({ links_to_entry: ids.entry, skip: 0, limit: 1000})\n  ]);\n\n  return {\n    contentTypes: contentTypes.items,\n    referenceInfo: prepareReferenceInfo({\n      entries: entries.items\n    })\n  }\n}\n\nconst EntryEditor = (props) => {\n  const globalState = useMethods(methods, getInitialValues(props.sdk));\n  const [state, actions] = globalState;\n\n  const createFeatureFlag = (featureFlag) => {\n    console.log(\"feature flag created: \",featureFlag);\n    actions.setFeatureFlag(featureFlag);\n  }\n\n  useEffect(() => {\n    fetchInitialData(props.sdk)\n      .then(data => {\n        actions.setInitialData(data);\n        return data;\n      })\n      .catch(() => {\n        actions.setError('Unable to load initial data');\n      });\n  }, []);\n\n  return (\n    <React.Fragment>\n      <GlobalStateContext.Provider value={globalState}>\n        <Modal title='Connect with VWO' isShown={props.client}>\n          <Paragraph testId='reconnect-vwo'>\n            Your VWO session has expired. Reconnect to continue editing.\n          </Paragraph>\n          <Button\n            className={styles.connect}\n            onClick={props.openAuth}\n            testId='connect-button'\n            isFullWidth\n            buttonType='naked'>\n          </Button>\n          <VWOLogo />\n        </Modal>\n\n        <div className={styles.editor} testId='editor-page'>\n          <StatusBar />\n          <SectionSplitter />\n          <FeatureFlag\n            sdk={props.sdk}\n            onFeatureFlagCreation={createFeatureFlag}/>\n          {state.featureFlag && <SectionSplitter />}\n          {state.featureFlag && \n            <Variations\n              sdk={props.sdk}\n              variations={state.variations}\n              contentTypes={state.contentTypes}/>}\n        </div>\n      </GlobalStateContext.Provider>\n    </React.Fragment>\n  )\n};\n\nexport default EntryEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}